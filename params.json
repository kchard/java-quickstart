{"name":"java-quickstart","tagline":"Getting started with Java and Gradle","body":"### Abstract\r\nThe purpose of this tutorial is to get you up and running with Java and Gradle as quickly as possible. This tutorial will focus on creating a standard Java library project. Gradle is a robust tool with a huge feature set. Therefore, my goal is to provide you with as much detail as necessary to get started without overwhelming you will a flood of information. I will provide links to the relevant Gradle documentation that you should read when you are ready to dig deeper.\r\n\r\n### What You Will Learn\r\n1. How to install gradle\r\n2. How to generate a project skeleton with gradle\r\n3. Basic Gradle project structure\r\n4. Using the Gradle wrapper\r\n5. Basic Gradle usage\r\n\r\n### 1. Installing Gradle\r\nThis tutorial will use Gradle 1.8 which was released 09-24-2013. Please follow the installation instructions provided by the Gradle team to get started.\r\n\r\n[http://www.gradle.org/docs/1.8/userguide/installation.html](http://www.gradle.org/docs/1.8/userguide/installation.html)\r\n\r\nTo verify that your installation was successful, open a terminal and run the following command:\r\n\r\n```\r\ngradle --version\r\n```\r\nIf your installation was successful, you should see output that includes the version of Gradle (1.8) along with the versions of Gradle's various dependencies such as Groovy, Ant, Ivy, and Java.\r\n\r\n\r\n### 2. Generate a Project Skeleton\r\n\r\nNow that you have gradle installed, navigate to the location where you would like to create your project, create a new empty directory called 'java-quickstart', and cd into it.  \r\n\r\n```\r\nmkdir java-quickstart\r\ncd java-quickstart\r\n```\r\n\r\nBefore we create the project skeleton, let's take a minute to learn a really useful gradle feature. Execute the following command in your terminal:\r\n\r\n```\r\ngradle tasks\r\n```\r\n\r\nYou should see a list of the tasks available to you. The list of available tasks will be dependent on your project setup, so it is a good idea to use this command to provide guidance as your project grows. Because we do not have a project created yet, you only see entries related to 'Build Setup' and 'Help'. Notice that there is a 'setupBuild' task available. This is the task that will provide the scaffolding for our project. To create your project execute the following command:\r\n\r\n```\r\ngradle setupBuild --type java-library\r\n```\r\nThis command tells Gradle to create the files neccesary for a Java library project, or more simply, a project that creates a jar artifact. If you would like to explore the 'setupBuild' task in more detail check out the documentation here:\r\n\r\n[http://www.gradle.org/docs/1.8/userguide/build_setup_plugin.html](http://www.gradle.org/docs/1.8/userguide/build_setup_plugin.html)\r\n\r\n### 3. Basic Gradle Project Structure\r\nTake a look at the files that Gradle created for you. You should see a directory structure that looks like this:\r\n\r\n```\r\njava-quickstart/\r\n    build.gradle\r\n    settings.gradle\r\n    src/\r\n    gradle/\r\n    gradlew\r\n    gradlew.bat\r\n```\r\n\r\nThe files can be broken down into two categories. They are the standard build files, and files related to the gradle wrapper.\r\n\r\n#### Build Files\r\n\r\nThe files that are part of the standard Gradle project structure are:\r\n\r\n* build.gradle\r\n* settings.gradle\r\n* src/\r\n\r\n__build.gradle__\r\n```\r\n/*\r\n * This build file was auto generated by running the Gradle 'buildSetup' task\r\n * by 'chardk' at '10/1/13 10:02 AM' with Gradle 1.8\r\n *\r\n * This generated file contains a sample Java project to get you started.\r\n * For more details take a look at the Java Quickstart chapter in the Gradle\r\n * user guide available at http://gradle.org/docs/1.8/userguide/tutorial_java_projects.html\r\n */\r\n\r\n// Apply the java plugin to add support for Java\r\napply plugin: 'java'\r\n\r\n// In this section you declare where to find the dependencies of your project\r\nrepositories {\r\n    // Use 'maven central' for resolving your dependencies.\r\n    // You can declare any Maven/Ivy/file repository here.\r\n    mavenCentral()\r\n}\r\n\r\n// In this section you declare the dependencies for your production and test code\r\ndependencies {\r\n    // The production code uses the SLF4J logging API at compile time\r\n    compile 'org.slf4j:slf4j-api:1.7.5'\r\n\r\n    // Declare the dependency for your favourite test framework you want to use in your tests.\r\n    // TestNG is also supported by the Gradle Test task. Just change the\r\n    // testCompile dependency to testCompile 'org.testng:testng:6.8.1' and add\r\n    // 'test.useTestNG()' to your build script.\r\n    testCompile \"junit:junit:4.11\"\r\n}\r\n\r\n```\r\n\r\nThis is the project build file. It is where you apply plugins, define repositories, declare dependencies, create tasks, etc. Rather than worry about the details now, just know that the file that was generated for you is all that is neccessary for a simple Java library project. As you become more familiar with Gradle and require additional functionality not offered by this simple build file, take time to read the Gradle documentation. Here are some good places to start:\r\n\r\n* [Java Quickstart](http://www.gradle.org/docs/1.8/userguide/tutorial_java_projects.html)\r\n* [Java Plugin](http://www.gradle.org/docs/1.8/userguide/java_plugin.html)\r\n\r\n__settings.gradle__\r\n```\r\n/*\r\n * This settings file was auto generated by the Gradle buildSetup task\r\n * by 'chardk' at '10/1/13 10:02 AM' with Gradle 1.8\r\n *\r\n * The settings file is used to specify which projects to include in your build.\r\n * In a single project build this file can be empty or even removed.\r\n *\r\n * Detailed information about configuring a multi-project build in Gradle can be found\r\n * in the user guide at http://gradle.org/docs/1.8/userguide/multi_project_builds.html\r\n */\r\n\r\n/*\r\n// To declare projects as part of a multi-project build use the 'include' method\r\ninclude 'shared'\r\ninclude 'api'\r\ninclude 'services:webservice'\r\n*/\r\n\r\nrootProject.name = 'java-quickstart'\r\n```\r\n\r\nThis file is used to configure various project settings. In the generated file, the only setting that is being applied is assigning a value to rootProject.name. This property will be available in the build.gradle file to be used by the build tasks. As you can see from the comments, another common use of the settings.gradle file is to configure multi-project builds. Multi-project builds are outside the scope of this tutorial, but keep in mind the fact that they are a really nice way to group together related code while maintaining loose coupling. As your project grows, consider refactoring it into several simpler releated projects.  \r\n\r\n__Java Source Files__\r\nThe src directory is where you will create all of your Java source files. The directory layout looks like this:\r\n\r\n```\r\nsrc/\r\n    main/\r\n        java/\r\n    test/\r\n        java/\r\n```\r\n\r\nYou will notice that the 'setupBuild' task created an example source file called 'Library.java' in the main/java directory and an example unit test file called 'LibraryTest.java' in the test/java directory. You should follow these conventions so that Gradle will automatically know where to find your Java files.\r\n\r\n### 4. Using the Gradle Wrapper\r\n\r\n#### Gradle Wrapper Files\r\n\r\nThe Gradle wrapper provides a way to create a self contained project. This means that you do not have to install Gradle in order to work on a project that contains the wrapper. This is great for a team of developers working on the same project or for working on a project from different computers. Another great use case is for Continuous Integration servers. No setup needs to be done on the server. All you need to do is grab the project from your SCM and execute gradle commands using the wrapper scripts.\r\n\r\nThe files that are related to the Gradle wrapper are:\r\n\r\n* gradle/\r\n* gradlew\r\n* gradlew.bat\r\n\r\nAssume that someone on your team created the project skeleton and checked everything in to source control. For you to start developing on the project, all you need to do is check out the source and start executing commands using the wrapper scripts. There is no need to manually install Gradle on your system. If you are developing on a Unix like system then you will use the _gradlew_ script. Similarly, if you are developing on Windows you will use the _gradlew.bat_ script. The gradle directory contains utilities used by the wrapper and can be ignored for the most part. Let's try running gradle with the wrapper by executing the following command:\r\n\r\n```\r\ngradlew build\r\n```\r\n\r\nIf this is the first command that you have executed using the wrapper script, then the first thing that the script will do is automatically download and configure Gradle for use in your project. The next thing that will happen is Gradle will download the dependencies declared in your build.gradle file. These dependencies will only be downloaded once and then cached on your local computer. Finally, Gradle willl compile your source and test files, execute the tests, and build a jar containing your application code.\r\n\r\nYou can check out the documentation of the wrapper here:\r\n\r\n[http://www.gradle.org/docs/1.8/userguide/gradle_wrapper.html](http://www.gradle.org/docs/1.8/userguide/gradle_wrapper.html)\r\n\r\n### 5. Basic Gradle Usage\r\n\r\nGradle embraces the idea of using convention over configuration for you build process. This approach was first taken by Maven in the Java build ecosystem. In practice it turns out that convention will get you most of the way there, but you will most likely require some customization to your build process. Gradle combines the conventions of Maven along with the flexibility of Ant to give you the best of both worlds. In this tutorial, I will not go into the details of the build lifecycle. For a simple project you can get along pretty far using just the built in tasks. To get started you only need to know a couple of tasks. \r\n\r\n1. `gradlew clean`\r\n2. `gradlew test`\r\n3. `gradlew build`\r\n\r\nYou may have noticed that after you ran `gradlew build`, a new directory was created in your project's root directory named 'build'. This directory contains all of the artifacts resulting from building your project. \r\n\r\n* build/classes - The compiled Java classes\r\n* build/test-results - The raw results of your unit tests\r\n* build/reports - An html report displaying the results of your unit tests\r\n* build/libs - The java-quickstart.jar library for your project\r\n\r\nIn order to clean up the files generated by the build process run the following command:\r\n\r\n```\r\ngradlew clean\r\n```\r\n\r\nThis should result in the 'build' directory being deleted. At this point your project is back to its initial state.\r\n\r\nNext try running this command:\r\n\r\n```\r\ngradlew test\r\n```\r\n\r\nThis command instructs Gradle to compile your Java source files, execute your unit tests, and generate the test report in the 'build/report' If all of your tests passed you should see a 'BUILD SUCCESSFULL' message. \r\n\r\nFinally, run the build command again:\r\n\r\n```\r\ngradlew build\r\n```\r\n\r\nThis command will instruct Gradle to compile your Java source files, execute your unit tests, generate a test report, and finally assemble your jar. You may notice that the some of the steps in the build output are labelled as 'UP-TO-DATE'. Gradle is smart enough to keep track of what steps it has already executed and only execute them again if something has changed. \r\n\r\nNow try to execute this command:\r\n\r\n```\r\ngradlew clean build\r\n```\r\n\r\nThe end result of running this command as when you previously ran just the `gradlew build` command. However, notice that most of the build steps in the console's output no longer are marked as 'UP-TO-DATE'. This is because you told Gradle to clean up the build directory before running the build. This means that Gradle had to recompile the sources, rerun the tests, regenerate the test report and finally generate the jar.\r\n\r\n__A Basic Workflow__\r\n\r\n1. Develop a new feature with unit tests\r\n2. `gradlew test`\r\n3. If tests fail, fix the code and go back to step 2\r\n4. If you need to add more features, go back to step 1\r\n5. `gradlew clean build`\r\n\r\nAt the end of this workflow you should have a unit tested version of 'java-quickstart.jar' that is ready for use.\r\n\r\nUsing this simple workflow with the default Gradle tasks can actually get you quite a long ways in the development of you project. At some point however, you will most likely need to define your own custom tasks and add additional external dependencies. When you get to that point, check out the following documentation:\r\n\r\n* [Build Script Basics](http://www.gradle.org/docs/1.8/userguide/tutorial_using_tasks.html)\r\n* [Dependencey Management Basics](http://www.gradle.org/docs/1.8/userguide/artifact_dependencies_tutorial.html)\r\n* [Writing Build Scripts](http://www.gradle.org/docs/1.8/userguide/writing_build_scripts.html)\r\n\r\nThe Gradle team has done a really nice job of documenting the tool. All of the references that I have included, plus a ton more are available here:\r\n\r\n[Gradle 1.8 User Guide](http://www.gradle.org/docs/1.8/userguide/userguide.html)\r\n\r\n### Start Your Project!!!\r\n\r\nWith what you have learned in this tutorial, you should know everything you need to get started building Java libraries with Gradle. \r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}